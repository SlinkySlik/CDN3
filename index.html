<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>V86 Emulator</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #eee;
      margin: 0;
      padding: 1rem;
    }

    #screen_container {
      display: flex;
      justify-content: center;
      margin-top: 1rem;
    }

    #start_button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 16px;
      cursor: pointer;
    }

    select {
      font-size: 16px;
      padding: 0.4rem;
    }
  </style>
</head>
<body>

  <h1>V86 Emulator</h1>
  <label for="os_select">Choose an OS image:</label>
  <select id="os_select">
    <option value="https://copy.sh/v86/images/buildroot-bzimage.bin|https://copy.sh/v86/images/buildroot-initrd.bin">Buildroot Linux</option>
    <option value="https://copy.sh/v86/images/linux3.iso">Linux ISO (Demo)</option>
    <option value="https://copy.sh/v86/images/freedos722.img">FreeDOS 7.22</option>
  </select>

  <br>
  <button id="start_button">Start Emulator</button>

  <div id="screen_container"></div>

  <!-- Load your local v86_all.js -->
  <script src="https://slinkyslik.github.io/CDN3/v86/v86_all.js"></script>

  <script>
    document.getElementById("start_button").addEventListener("click", () => {
      const container = document.getElementById("screen_container");
      container.innerHTML = ""; // clear previous emulator if any

      const selection = document.getElementById("os_select").value.split("|");
      const bzimage = selection[0] || "";
      const initrd = selection[1] || "";

      const emulator = new V86Starter({
        wasm_path: "https://slinkyslik.github.io/CDN3/v86/v86.wasm",
        memory_size: 64 * 1024 * 1024,
        vga_memory_size: 2 * 1024 * 1024,
        screen_container: container,
        bios: {
          url: "https://slinkyslik.github.io/CDN3/v86/bios/seabios.bin"
        },
        vga_bios: {
          url: "https://slinkyslik.github.io/CDN3/v86/bios/vgabios.bin"
        },
        bzimage: bzimage ? { url: bzimage } : undefined,
        initrd: initrd ? { url: initrd } : undefined,
        cdrom: (bzimage === "" && initrd === "") ? { url: selection[0] } : undefined,
        autostart: true
      });
    });
  </script>

</body>
</html>
